<% content_for :title, "University Pathfinder - FAQ" %>
<% content_for :body_class, "layout-sticky-footer" %>

<% content_for :head do %>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
<% end %>

<% categories = faq_categories(@faqs) %>

<div class="faqs-page" data-controller="faqs-login-prompt" data-faqs-login-prompt-login-url-value="<%= login_path %>">
  <div class="page-header text-center">
    <div class="container">
      <h1 class="display-4 fw-bold mb-4"><i class="fas fa-question-circle me-2"></i>FAQ</h1>
    </div>
  </div>

  <div class="main-content">
    <div class="container">
      <div class="d-flex justify-content-between align-items-center mb-4">
        <h2 class="mb-0">
          <i class="fas fa-user me-2"></i>Visitatore
        </h2>

        <div class="d-flex align-items-center gap-2">
          <%= render "search", collapse_id: "faq-search-visitor" %>
          <%= render "filter", categories: categories, dropdown_id: "faq-filter-visitor" %>
          <%= render "notify", mode: :visitor %>
          <%= render "language", dropdown_id: "faq-lang-visitor" %>
          <button type="button"
                  class="btn btn-success"
                  data-action="click->faqs-login-prompt#prompt"
                  data-faqs-login-prompt-title-param="Accedi per suggerire"
                  data-faqs-login-prompt-message-param="La tua opinione Ã¨ importante: accedi per suggerire una nuova FAQ.">
            <i class="fas fa-plus me-2"></i>Suggerisci FAQ
          </button>
        </div>
      </div>

      <%= render "search_panel", collapse_id: "faq-search-visitor" %>

      <%= render "faq_grid",
        faqs: @faqs,
        mode: :visitor,
        up_map: @faq_votes_up_map,
        down_map: @faq_votes_down_map,
        current_map: @faq_votes_current_map,
        empty_title: "Nessuna FAQ disponibile",
        empty_body: "Quando saranno pubblicate, le vedrai qui." %>
    </div>
  </div>
</div>

<%= render "login_modal" %>
